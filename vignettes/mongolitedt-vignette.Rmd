---
title: "Mongolitedt Vignette"
author: "D Cooley"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Mongolitedt

Mongolitedt is an extension to [mongolite](https://cran.r-project.org/web/packages/mongolite/index.html). It binds two methods, `finddt()` and `aggregatedt()` to the `mongo` object that's created through `mongo <- mongo()`. 

These functions return `data.table` objects from the find or aggregate query. Therefore, the query you send to `mongodb` has to be able to be coerced into a `data.table`. If not, it will throw an error.


## Examples

You bind the two functions using `bind_mongolitedt()`

```
## create a mongo() connection object
mongo <- mongo(collection = "vignette",
               db = "mongolitedt",
               url = "mongodb://localhost")

## looking at the mongo object we see all the methods currently attached.
mongo
# <Mongo collection> 'test' 
#  $aggregate(pipeline = "{}", handler = NULL, pagesize = 1000) 
#  $count(query = "{}") 
#  $distinct(key, query = "{}") 
#  $drop() 
#  $export(con = stdout(), bson = FALSE) 
#  $find(query = "{}", fields = "{\"_id\":0}", sort = "{}", skip = 0, limit = 0, handler = NULL, pagesize = 1000) 
#  $import(con, bson = FALSE) 
#  $index(add = NULL, remove = NULL) 
#  $info() 
#  $insert(data, pagesize = 1000) 
#  $iterate(query = "{}", fields = "{\"_id\":0}", sort = "{}", skip = 0, limit = 0) 
#  $mapreduce(map, reduce, query = "{}", sort = "{}", limit = 0, out = NULL, scope = NULL) 
#  $remove(query, multiple = FALSE) 
#  $rename(name, db = NULL) 
#  $update(query, update = "{\"$set\":{}}", upsert = FALSE, multiple = FALSE) 

```

We can now bind the two new functions and see them added to the `mongo` object

```
bind_mongolitedt(mongo)

## and look at the methods
mongo
# <Mongo collection> 'test' 
#  $aggregate(pipeline = "{}", handler = NULL, pagesize = 1000) 
#  $aggregatedt(pipeline = "{}", pagesize = 1000) 
#  $count(query = "{}") 
#  $distinct(key, query = "{}") 
#  $drop() 
#  $export(con = stdout(), bson = FALSE) 
#  $find(query = "{}", fields = "{\"_id\":0}", sort = "{}", skip = 0, limit = 0, handler = NULL, pagesize = 1000) 
#  $finddt(query = "{}", fields = "{\"_id\":0}", sort = "{}", skip = 0, limit = 0, pagesize = 1000) 
#  $import(con, bson = FALSE) 
#  $index(add = NULL, remove = NULL) 
#  $info() 
#  $insert(data, pagesize = 1000) 
#  $iterate(query = "{}", fields = "{\"_id\":0}", sort = "{}", skip = 0, limit = 0) 
#  $mapreduce(map, reduce, query = "{}", sort = "{}", limit = 0, out = NULL, scope = NULL) 
#  $remove(query, multiple = FALSE) 
#  $rename(name, db = NULL) 
#  $update(query, update = "{\"$set\":{}}", upsert = FALSE, multiple = FALSE) 

```

In the above example we see the two methods, `finddt()` and `aggregatedt()` have been attached to the `mongo` object.

You then use them as you would the regular `find` and `aggregate` methods. However, the returned objects will be `data.table`s.


```{r}







```




